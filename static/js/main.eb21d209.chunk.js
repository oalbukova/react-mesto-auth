(this["webpackJsonpmesto-russia"]=this["webpackJsonpmesto-russia"]||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/logo.62dd2ec0.svg"},22:function(e,t,a){e.exports=a.p+"static/media/union.4072126c.svg"},23:function(e,t,a){e.exports=a.p+"static/media/icon.e38b395c.svg"},26:function(e,t,a){e.exports=a(37)},31:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),i=a.n(r),c=(a(31),a(24)),s=a(1),u=a(2),l=a(7),p=a(18),m=a.n(p);var d=function(e){var t=e.signOut,a=e.email;return o.a.createElement("nav",{className:"header__nav"},o.a.createElement("ul",{className:"header__list header__list_main"},o.a.createElement("li",{className:"header__list-item header__list-item_main"},a),o.a.createElement("li",{onClick:t,className:"header__list-link"},"\u0412\u044b\u0439\u0442\u0438")))};var _=function(e){var t=e.loggedIn,a=e.onSignOut,n=e.userData,r=e.loginState,i=e.emptyClick;return o.a.createElement("header",{className:"header page__header"},o.a.createElement("img",{className:"logo",src:m.a,alt:"logo",lang:"en"}),t?o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"checkbox",className:"header__menu-toggle",id:"header__menu-toggle"}),o.a.createElement("label",{htmlFor:"header__menu-toggle",className:"header__menu-button",onClick:i},o.a.createElement("span",{className:"header__menu-span",onClick:i})),o.a.createElement(d,{signOut:a,email:n?n.email:""})):o.a.createElement(l.b,{to:r?"/sign-in":"/sign-up",className:"header__list-link"},r?"\u0412\u043e\u0439\u0442\u0438":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))},f=o.a.createContext();var h=function(e){var t=o.a.useContext(f),a={backgroundImage:"url("+e.card.link+")"},n=e.card.owner._id===t._id,r="card__delete ".concat(n?"":"card__delete_hidden"),i=e.card.likes.some((function(e){return e._id===t._id})),c="like__button ".concat(i?"like__button_type_active":"");return o.a.createElement("li",{key:e.card._id,className:"card card-list__card"},o.a.createElement("div",{onClick:function(){e.onCardClick(e.card)},className:"card__img",style:a}),o.a.createElement("button",{className:r,type:"button",onClick:function(){e.onCardDelete(e.card)}}),o.a.createElement("div",{className:"card__caption"},o.a.createElement("h2",{className:"card__text"},e.card.name),o.a.createElement("div",{className:"like"},o.a.createElement("button",{className:c,onClick:function(){e.onCardLike(e.card)},type:"button"}),e.card.likes.length>0&&o.a.createElement("p",{className:"like__sum"},e.card.likes.length))))};var g=function(e){var t=o.a.useContext(f);return o.a.createElement("main",{className:"main"},o.a.createElement("section",{className:"profile main__profile"},o.a.createElement("img",{className:"profile__img",src:t.avatar,alt:t.name,name:"avatar"}),o.a.createElement("div",{onClick:e.onEditAvatar,className:"profile__img-hover"}),o.a.createElement("div",{className:"profile__container"},o.a.createElement("div",{className:"profile__info"},o.a.createElement("h1",{className:"profile__title"},t.name),o.a.createElement("p",{className:"profile__subtitle"},t.about)),o.a.createElement("button",{onClick:e.onEditProfile,className:"profile__edit-button",type:"button"})),o.a.createElement("button",{onClick:e.onAddPlace,className:"profile__add-button",type:"button"})),o.a.createElement("ul",{className:"card-list main__card-list"},e.cards&&e.cards.map((function(t){return o.a.createElement(h,{key:t._id,card:t,onCardClick:e.clickImages,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})}))))};var v=function(){return o.a.createElement("footer",{className:"footer page__footer"},o.a.createElement("p",{className:"footer__content"},"\xa9 2020 Olga Albukova"))};var b=function(e){return o.a.createElement("section",{className:e.isOpen?"popup popup_opened":"popup",id:"popupBig"},o.a.createElement("div",{className:"popup-view"},o.a.createElement("button",{onClick:e.onClose,className:"button-close",id:"view-close",type:"reset"}),o.a.createElement("figure",{className:"popup-view__item"},o.a.createElement("img",{src:e.card.link,className:"popup-view__img",alt:e.card.name}),o.a.createElement("figcaption",{className:"popup-view__caption"},e.card.name))))};var E=function(e){return o.a.createElement("section",{className:e.isOpen?"popup popup_opened":"popup",id:e.name},o.a.createElement("form",{className:"popup__container popup__container_type_".concat(e.formName),name:e.name,method:"post",action:"#",onSubmit:e.onSubmit},o.a.createElement("button",{onClick:e.onClose,className:"button-close",type:"reset"}),o.a.createElement("h2",{className:"popup__title"},e.title),e.children,o.a.createElement("button",{className:e.disabled?"popup__button-save popup__button-save_type_disabled":"popup__button-save popup__button-save_type_".concat(e.buttonSaveName),type:"submit",disabled:e.disabled},e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":e.submit)))};var y=function(e){var t=o.a.useRef(),a=o.a.useRef(),n=o.a.useContext(f),r=o.a.useState(""),i=Object(s.a)(r,2),c=i[0],u=i[1],l=o.a.useState(""),p=Object(s.a)(l,2),m=p[0],d=p[1],_=o.a.useState(""),h=Object(s.a)(_,2),g=h[0],v=h[1],b=o.a.useState(""),y=Object(s.a)(b,2),O=y[0],N=y[1],j=o.a.useState(!1),S=Object(s.a)(j,2),k=S[0],C=S[1],w=o.a.useState(!1),L=Object(s.a)(w,2),T=L[0],x=L[1],P=o.a.useState(!0),I=Object(s.a)(P,2),D=I[0],A=I[1];function U(){v(t.current.validationMessage),N(a.current.validationMessage),t.current.validity.valid?C(!0):C(!1),a.current.validity.valid?x(!0):x(!1)}return o.a.useEffect((function(){u(n.name),d(n.about)}),[n,e.isOpen]),o.a.useEffect((function(){A(!1),v(""),N("")}),[e.isOpen]),o.a.useEffect((function(){A(!k||!T)}),[k,T,c,m]),o.a.createElement(E,{name:"form_profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:c,about:m})},isLoading:e.isLoading,disabled:D},o.a.createElement("input",{className:"popup__input popup__input_type_name",id:"name-input",type:"text",required:!0,placeholder:"\u0418\u043c\u044f",value:c||"",ref:t,name:"name",pattern:"[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451 -]*",minLength:"2",maxLength:"40",onChange:function(e){u(e.target.value),U()}}),o.a.createElement("span",{className:"popup__span-error ".concat(!k&&"popup__span-error_type_active"),id:"name-input-error"},g),o.a.createElement("input",{className:"popup__input popup__input_type_job",id:"job-input",type:"text",required:!0,placeholder:"\u041e \u0441\u0435\u0431\u0435",value:m||"",ref:a,name:"about",minLength:"2",maxLength:"200",onChange:function(e){d(e.target.value),U()}}),o.a.createElement("span",{className:"popup__span-error ".concat(!T&&"popup__span-error_type_active"),id:"job-input-error"},O))};var O=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),r=o.a.useState(""),i=Object(s.a)(r,2),c=i[0],u=i[1],l=o.a.useState(""),p=Object(s.a)(l,2),m=p[0],d=p[1],_=o.a.useState(""),f=Object(s.a)(_,2),h=f[0],g=f[1],v=o.a.useState(""),b=Object(s.a)(v,2),y=b[0],O=b[1],N=o.a.useState(!1),j=Object(s.a)(N,2),S=j[0],k=j[1],C=o.a.useState(!1),w=Object(s.a)(C,2),L=w[0],T=w[1],x=o.a.useState(!0),P=Object(s.a)(x,2),I=P[0],D=P[1];function A(){g(t.current.validationMessage),O(a.current.validationMessage),t.current.validity.valid?k(!0):k(!1),a.current.validity.valid?T(!0):T(!1)}return o.a.useEffect((function(){D(!0),g(""),O(""),u(""),d("")}),[e.isOpen]),o.a.useEffect((function(){D(!S||!L)}),[S,L,c,m]),o.a.createElement(E,{name:"form_card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",submit:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:c,link:m})},isLoading:e.isLoading,disabled:I},o.a.createElement("input",{className:"popup__input popup__input_type_place",id:"name",type:"text",value:c||"",required:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",minLength:"1",maxLength:"30",onChange:function(e){u(e.target.value),A()},ref:t}),o.a.createElement("span",{className:"popup__span-error ".concat(!S&&"popup__span-error_type_active"),id:"name-error"},h),o.a.createElement("input",{className:"popup__input popup__input_type_link",id:"link",type:"url",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"link",ref:a,value:m||"",onChange:function(e){d(e.target.value),A()}}),o.a.createElement("span",{className:"popup__span-error ".concat(!L&&"popup__span-error_type_active"),id:"link-error"},y))};var N=function(e){var t=o.a.useRef(),a=o.a.useContext(f),n=o.a.useState(""),r=Object(s.a)(n,2),i=r[0],c=r[1],u=o.a.useState(""),l=Object(s.a)(u,2),p=l[0],m=l[1],d=o.a.useState(!1),_=Object(s.a)(d,2),h=_[0],g=_[1],v=o.a.useState(!0),b=Object(s.a)(v,2),y=b[0],O=b[1];return o.a.useEffect((function(){c("")}),[a,e.isOpen]),o.a.useEffect((function(){O(!0),m("")}),[e.isOpen]),o.a.useEffect((function(){O(!h)}),[h,i]),o.a.createElement(E,{name:"form_avatar",formName:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",submit:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:i})},isLoading:e.isLoading,disabled:y},o.a.createElement("input",{onChange:function(e){c(e.target.value),m(t.current.validationMessage),t.current.validity.valid?g(!0):g(!1)},ref:t,value:i||"",minLength:"2",maxLength:"200",className:"popup__input popup__input_type_avatar",id:"avatar-input",type:"url",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"link"}),o.a.createElement("span",{className:"popup__span-error ".concat(!h&&"popup__span-error_type_active"),id:"avatar-input-error"},p))};var j=function(e){return o.a.createElement(E,{name:"form_confirmation",buttonSaveName:"confirm",formName:"confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submit:"\u0414\u0430",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onDelete()},isLoading:e.isLoading})};var S=function(e){var t=e.onRegister,a=e.successToolTip,n=e.openToolTip,r=e.onLoginState,i=o.a.useRef(),c=o.a.useRef(),p=o.a.useState(""),m=Object(s.a)(p,2),d=m[0],_=m[1],f=o.a.useState(""),h=Object(s.a)(f,2),g=h[0],v=h[1],b=o.a.useState(""),E=Object(s.a)(b,2),y=E[0],O=E[1],N=o.a.useState(""),j=Object(s.a)(N,2),S=j[0],k=j[1],C=o.a.useState(!1),w=Object(s.a)(C,2),L=w[0],T=w[1],x=o.a.useState(!1),P=Object(s.a)(x,2),I=P[0],D=P[1],A=o.a.useState(!0),U=Object(s.a)(A,2),R=U[0],M=U[1],q=Object(u.g)();function z(){O(i.current.validationMessage),k(c.current.validationMessage),i.current.validity.valid?T(!0):T(!1),c.current.validity.valid?D(!0):D(!1)}return o.a.useEffect((function(){r(!0)}),[]),o.a.useEffect((function(){M(!1),O(""),k("")}),[]),o.a.useEffect((function(){M(!L||!I)}),[L,I,d,g]),o.a.createElement("section",{className:"registration"},o.a.createElement("form",{disabled:R,onSubmit:function(e){e.preventDefault(),t({email:d,password:g}).then((function(){a(),setTimeout(n,1e3),q.push("/sign-in")})).catch((function(){n()}))},className:"popup__container popup__container_registration"},o.a.createElement("h2",{className:"popup__title popup__title_registration"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.a.createElement("input",{className:"popup__input popup__input_registration",id:"email",name:"email",type:"email",value:d||"",ref:i,onChange:function(e){_(e.target.value),z()},placeholder:"Email",required:!0,pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",minLength:"4",maxLength:"40"}),o.a.createElement("span",{className:"popup__span-error popup__span-error_email ".concat(!L&&"popup__span-error_type_active "),id:"email-input-error"},y),o.a.createElement("input",{id:"password",name:"password",type:"password",value:g||"",ref:c,onChange:function(e){v(e.target.value),z()},className:"popup__input popup__input_registration",required:!0,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",minLength:"10",maxLength:"10"}),o.a.createElement("span",{className:"popup__span-error ".concat(!I&&"popup__span-error_type_active"),id:"password-input-error"},S),o.a.createElement("button",{type:"submit",className:"popup__button-registration"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),o.a.createElement(l.b,{to:"/sign-in",className:"popup__span-registration"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438")))};var k=function(e){var t=e.onLogin,a=e.onLoginState,n=o.a.useRef(),r=o.a.useRef(),i=o.a.useState(""),c=Object(s.a)(i,2),p=c[0],m=c[1],d=o.a.useState(""),_=Object(s.a)(d,2),f=_[0],h=_[1],g=o.a.useState(""),v=Object(s.a)(g,2),b=v[0],E=v[1],y=o.a.useState(""),O=Object(s.a)(y,2),N=O[0],j=O[1],S=o.a.useState(!1),k=Object(s.a)(S,2),C=k[0],w=k[1],L=o.a.useState(!1),T=Object(s.a)(L,2),x=T[0],P=T[1],I=o.a.useState(!0),D=Object(s.a)(I,2),A=D[0],U=D[1],R=Object(u.g)();function M(){E(n.current.validationMessage),j(r.current.validationMessage),n.current.validity.valid?w(!0):w(!1),r.current.validity.valid?P(!0):P(!1)}return o.a.useEffect((function(){U(!1),E(""),j("")}),[]),o.a.useEffect((function(){U(!C||!x)}),[C,x,p,f]),o.a.useEffect((function(){a(!1)}),[]),o.a.createElement("section",{className:"registration"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p&&f&&t({email:p,password:f}).then((function(){R.push("/")}))},disabled:A,className:"popup__container popup__container_registration"},o.a.createElement("h2",{className:"popup__title popup__title_registration"},"\u0412\u0445\u043e\u0434"),o.a.createElement("input",{className:"popup__input popup__input_registration",required:!0,id:"email",name:"email",type:"email",placeholder:"Email",value:p||"",ref:n,onChange:function(e){m(e.target.value),M()},pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",minLength:"4",maxLength:"40"}),o.a.createElement("span",{className:"popup__span-error popup__span-error_email ".concat(!C&&"popup__span-error_type_active "),id:"email-input-error"},b),o.a.createElement("input",{className:"popup__input popup__input_registration",required:!0,id:"password",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",minLength:"10",maxLength:"10",value:f||"",ref:r,onChange:function(e){h(e.target.value),M()}}),o.a.createElement("span",{className:"popup__span-error ".concat(!x&&"popup__span-error_type_active"),id:"password-input-error"},N),o.a.createElement("button",{type:"submit",className:"popup__button-registration"},"\u0412\u043e\u0439\u0442\u0438"),o.a.createElement(l.b,{to:"/sign-up",className:"popup__span-registration"},"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))},C=a(20),w=a(21),L=new(function(){function e(t){Object(C.a)(this,e),this._url=t.baseUrl,this._headers=t.headers}return Object(w.a)(e,[{key:"getInfoUser",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"updateInfo",value:function(e,t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",baseUrl:"https://mesto.nomoreparties.co/v1/cohort-12",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.status))}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"".concat(t?"PUT":"DELETE"),headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-12",headers:{authorization:"77aadbcb-6e04-47e7-b5a0-c659fba79fac","Content-Type":"application/json"}}),T="https://auth.nomoreparties.co",x=a(25),P=function(e){var t=e.component,a=Object(x.a)(e,["component"]);return o.a.createElement(u.b,null,(function(){return a.loggedIn?o.a.createElement(t,a):o.a.createElement(u.a,{to:"./sign-in"})}))},I=a(22),D=a.n(I),A=a(23),U=a.n(A);var R=function(e){var t=e.isOpen,a=e.onClose,n=e.successStyle,r={backgroundImage:"url("+D.a+")"},i={backgroundImage:"url("+U.a+")"};return o.a.createElement("section",{className:t?"popup popup_opened":"popup",id:"InfoTooltip"},o.a.createElement("form",{className:"popup__container popup__container_type_login"},o.a.createElement("button",{onClick:a,className:"button-close button-close_login",id:"formError-close",type:"button"}),o.a.createElement("div",{className:"popup__img",style:n?i:r}),o.a.createElement("h2",{className:"popup__title popup__title_type_login"},n?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")))};var M=function(){var e=o.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),i=Object(s.a)(r,2),l=i[0],p=i[1],m=o.a.useState(!1),d=Object(s.a)(m,2),h=d[0],E=d[1],C=o.a.useState(!1),w=Object(s.a)(C,2),x=w[0],I=w[1],D=o.a.useState(!1),A=Object(s.a)(D,2),U=A[0],M=A[1],q=o.a.useState([]),z=Object(s.a)(q,2),J=z[0],B=z[1],$=o.a.useState([]),F=Object(s.a)($,2),G=F[0],H=F[1],W=o.a.useState({}),Z=Object(s.a)(W,2),K=Z[0],Q=Z[1],V=o.a.useState({}),X=Object(s.a)(V,2),Y=X[0],ee=X[1],te=o.a.useState(),ae=Object(s.a)(te,2),ne=ae[0],oe=ae[1],re=o.a.useState(!1),ie=Object(s.a)(re,2),ce=ie[0],se=ie[1],ue=o.a.useState(!1),le=Object(s.a)(ue,2),pe=le[0],me=le[1],de=o.a.useState({}),_e=Object(s.a)(de,2),fe=_e[0],he=_e[1],ge=o.a.useState(!1),ve=Object(s.a)(ge,2),be=ve[0],Ee=ve[1],ye=o.a.useState(!1),Oe=Object(s.a)(ye,2),Ne=Oe[0],je=Oe[1],Se=o.a.useState(!1),ke=Object(s.a)(Se,2),Ce=ke[0],we=ke[1],Le=Object(u.g)(),Te="".concat(Ce?"empty":"empty_type_inactive");function xe(e){me(e)}function Pe(){je(!0)}function Ie(){Ee(!0)}function De(){var e,t=localStorage.getItem("jwt");t&&(e=t,fetch("".concat(T,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){try{if(200===e.status)return e.json();if(400===e.status)throw new Error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435");if(401===e.status)throw new Error("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d")}catch(t){return console.log(t),t}})).then((function(e){return e})).catch((function(e){return console.log(e)}))).then((function(e){e?(he({id:e.data._id,email:e.data.email}),se(!0),Le.push("/")):localStorage.removeItem("jwt")}))}function Ae(){n(!1),p(!1),E(!1),M(!1),I(!1),Q({}),Ee(!1),setTimeout(je,2e3,!1)}function Ue(e){"Escape"===e.key&&Ae()}function Re(e){e.target.classList.contains("popup")&&Ae()}return o.a.useEffect((function(){De()}),[ce]),o.a.useEffect((function(){Promise.all([L.getInfoUser(),L.getInitialCards()]).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];ee(a),B(n)})).catch((function(e){console.log(e)}))}),[]),o.a.useEffect((function(){return window.addEventListener("keydown",Ue),window.addEventListener("mousedown",Re),function(){window.removeEventListener("mousedown",Re),window.removeEventListener("keydown",Ue)}})),o.a.createElement(f.Provider,{value:Y},o.a.createElement("div",{className:Te}),o.a.createElement("div",{className:"page"},o.a.createElement(_,{loggedIn:ce,onSignOut:function(){localStorage.removeItem("jwt"),se(!1),Le.push("/sign-in")},userData:fe,loginState:pe,emptyClick:function(){we(!Ce)}}),o.a.createElement(u.d,null,o.a.createElement(P,{exact:!0,path:"/",loggedIn:ce,component:g,onEditProfile:function(){n(!0)},onAddPlace:function(){p(!0)},onEditAvatar:function(){E(!0)},clickImages:function(e){Q(e),M(!0)},cards:J,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===Y._id}));L.changeLikeCardStatus(e._id,!t).then((function(t){var a=J.map((function(a){return a._id===e._id?t:a}));B(a)}))},onCardDelete:function(e){H(e),I(!0)}}),o.a.createElement(u.b,{path:"/sign-in"},o.a.createElement(k,{name:"login",successToolTip:Pe,onLogin:function(e){var t=e.email,a=e.password;return oe(!0),function(e,t){return fetch("".concat(T,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){try{if(200===e.status)return e.json();if(400===e.status)throw new Error("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439");if(401===e.status)throw new Error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")}catch(t){return console.log(t),t}})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e})).catch((function(e){return console.log(e)}))}(t,a).then((function(e){e&&e.token?(se(!0),De()):Ie()})).catch((function(e){console.log(e)})).finally((function(){oe(!1)}))},onLoginState:xe,isLoading:ne})),o.a.createElement(u.b,{path:"/sign-up"},o.a.createElement(S,{name:"register",onRegister:function(e){var t=e.email,a=e.password;return oe(!0),function(e,t){return fetch("".concat(T,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){if(400!==e.status)return e.json();throw new Error("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439")})).then((function(e){return e})).catch((function(e){return console.log(e)}))}(t,a).then((function(e){if(oe(!1),e)return!0;throw new Error("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439")}))},openToolTip:Ie,successToolTip:Pe,onLoginState:xe,isLoading:ne})),o.a.createElement(u.b,null,ce?o.a.createElement(u.a,{to:"/"}):o.a.createElement(u.a,{to:"/sign-in"}))),o.a.createElement(v,null),o.a.createElement(y,{isOpen:a,onClose:Ae,onUpdateUser:function(e){oe(!0),L.update(e.name,e.about).then((function(e){ee(e),Ae()})).catch((function(e){console.log(e)})).finally((function(){return oe(!1)}))},isLoading:ne}),o.a.createElement(O,{isOpen:l,onClose:Ae,onAddPlace:function(e){oe(!0),L.addNewCard(e.name,e.link).then((function(e){B([].concat(Object(c.a)(J),[e])),Ae()})).catch((function(e){console.log(e)})).finally((function(){return oe(!1)}))},isLoading:ne}),o.a.createElement(N,{isOpen:h,onClose:Ae,onUpdateAvatar:function(e){oe(!0),L.updateAvatar(e.avatar).then((function(e){ee(e),Ae()})).catch((function(e){console.log(e)})).finally((function(){return oe(!1)}))},isLoading:ne}),o.a.createElement(j,{isOpen:x,onClose:Ae,onDelete:function(){oe(!0),L.deleteCard(G._id).then((function(){var e=J.filter((function(e){return e._id!==G._id}));B(e),Ae()})).catch((function(e){console.log(e)})).finally((function(){return oe(!1)}))},isLoading:ne}),o.a.createElement(b,{isOpen:U,onClose:Ae,card:K}),o.a.createElement(R,{isOpen:be,onClose:Ae,successStyle:Ne})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,null,o.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.eb21d209.chunk.js.map